services:
  skland-attendance:
    build: .
    container_name: skland-attendance
    restart: unless-stopped
    environment:
      # 森空岛凭据 (必填)
      - SKLAND_TOKENS=${SKLAND_TOKENS}

      # 通知 URL (可选)
      - SKLAND_NOTIFICATION_URLS=${SKLAND_NOTIFICATION_URLS:-}

      # 最大重试次数 (可选，默认为 3)
      - SKLAND_MAX_RETRIES=${SKLAND_MAX_RETRIES:-3}

      # KV 存储配置 (可选)
      # - KV_REST_API_URL=${KV_REST_API_URL:-}
      # - KV_REST_API_TOKEN=${KV_REST_API_TOKEN:-}
      # - REDIS_URL=${REDIS_URL:-}
      # - S3_ACCESS_KEY_ID=${S3_ACCESS_KEY_ID:-}
      # - S3_SECRET_ACCESS_KEY=${S3_SECRET_ACCESS_KEY:-}
      # - S3_BUCKET=${S3_BUCKET:-}
      # - S3_REGION=${S3_REGION:-}
      # - S3_ENDPOINT=${S3_ENDPOINT:-}

      # 禁用持久化存储 (可选)
      # - DISABLE_KV=${DISABLE_KV:-false}

    volumes:
      # 持久化本地文件存储 (如果使用本地文件存储)
      - ./data:/app/.data

    # 如果需要暴露 HTTP 端口用于健康检查或 API 访问
    # ports:
    #   - "3000:3000"

  # 可选: Redis 服务 (如果使用 Redis 持久化)
  # redis:
  #   image: redis:7-alpine
  #   container_name: skland-redis
  #   restart: unless-stopped
  #   volumes:
  #     - redis-data:/data
  #   command: redis-server --appendonly yes

# volumes:
#   redis-data:
